# HTTP-services Personal аccount (1.1.3.5)

## Оглавление

- [Общее](#общее)

  - [Ping](#ping)

  - [Approval of repairs](#approval-of-repairs)

  - [Push](#push)
  
- [Личный кабинет клиента](#личный-кабинет-клиента)
  
  - [Indicatorsinfo](#indicatorsinfo)

  - [CustomerObjects](#customerobjects)

  - [Indicators](#indicators)

  - [PersonalAcc](#personalacc)

  - [priceconditions](#priceconditions)

- [Товары](#товары)
  
  - [Product](#product)
  
  - [Image](#image)
  
  - [Price](#price)

  - [Stock](#stock)

- [ProParck](#proparck)
  
  - [ProParckRefund](#proparckrefund)

  - [ProParckReplacement](#proparckreplacement)
  
  - [ProParckNew](#proparcknew)
  
  - [ProParckMoving](#proparckmoving)

  - [ProParckRequest](#proparckrequest)

- [Documents](#documents)
      
  - [DataBySalesAll](#databysalesall)

  - [DataBySalesAllForPeriod](#databysalesallforperiod)

  - [DataBySalesByGuid](#databysalesbyguid)

---

## Общее

Во всех сервисах:

**_TransactionID_** - уникальный GUID для каждого обращения. Используется для логирования.

**_SourceID_** - уникальный GUID системы, которая обращается к сервису. Необходим, для идентификации источника запроса и не должен часто меняться.

## Ping

### Описание

Предназначен для проверки доступности сервиса.

Метод - **GET**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/ping/
```

Возвращает _JSON_ с следующими параметрами элемента _response_:

| Параметры |  Тип   | Обязательный | Описание                                      |
| --------- | :----: | :----------: | :-------------------------------------------- |
| result    | Строка |      Да      | Возвращает "ок" при успешном соединении       |
| ver       | Строка |      Да      | Возвращает строковое представление версии API |

### Пример

**Ответ в формате _JSON_**:

```json
{
  "response": {
    "result": "ok",
    "ver": "1.1.1.1"
  }
}
```

---

## Approval of repairs

### Описание

Предназначен для согласования/отмены согласования заказ-наряда в 1С по переданному GUID.

Метод - **PUT**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/repairs/approval/{guid}
```

где guid уникальный идентификатор заказ-наряда (строка 36 знаков)

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание                                                          |
| ------------- | :---------: | :----------: | :---------------------------------------------------------------- |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)                                               |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)                                               |
| Approval      |   Булево    |      Да      | Признак действия - согласовать документ или отменить согласование |

Тело ответа содержит _JSON_ с следующими параметрами элемента _response_:

| Параметры            |     Тип     | Обязательный | Описание                                                                   |
| -------------------- | :---------: | :----------: | :------------------------------------------------------------------------- |
| TransactionID        | Строка (36) |     Нет      | [См. общее](#общее)                                                        |
| SourceID             | Строка (36) |      Да      | [См. общее](#общее)                                                        |
| OrderStatus          |   Строка    |      Да      | Статус заказ-наряда после согласования или отмены согласованиясогласование |
| NewOrderGUIDDocument | Строка (36) |      Да      | GUID заказ наряда на диагностику (создается при отмене согласования)       |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/repairs/approval/79ad8c9e-e3be-11eb-b9a8-04d9f5ae0304
```

**Тело запроса в формате _JSON_**:

```json
{
  "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
  "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
  "Approval": true
}
```

**Ответ в формате _JSON_**:

```json
{
  "response": {
    "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c70",
    "OrderStatus": "Ожидает оплаты",
    "NewOrderGUIDDocument": "0d2fd304-07ef-4f32-9a76-2b7d820e2c80"
  },
  "error": null,
  "errorCode": null
}
```

---

## Files

### Описание

Предназначен для получения двоичных данных изображений из 1С по переданному GUID

Метод **PUT**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/files/{type}/{guid}
```

где guid уникальный идентификатор заказ-наряда (строка 36 знаков)

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |

Если успешно, то возвращаются двоичные данные иначе тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                       |
| --------- | :----: | :----------: | :----------------------------- |
| response  |  Null  |      Да      | Не заполняется при ошибки      |
| error     | Строка |      Да      | Строка описания ошибки         |
| errorCode | Строка |      Да      | Код ошибки в классификации API |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/files/ClientObject/f41acb2d-79f8-11ed-81af-00155df43007
```

**Тело запроса в формате _JSON_**:

```json
{
  "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
  "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64"
}
```

**Ответ в формате _JSON_**:
Двоичные данные или

```json
{
  "response": null,
  "error": "Не удалось получить двоичные данные. Возможно передан некорректный идентификатор (guid)",
  "errorCode": "ErrSearch"
}
```

---

## Push

### Описание

Предназначен для отправка Push уведомлений на сайт из 1С.

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
Определяется на стороне сайта
```

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                                                                                                                                                                                                                                               |
| --------- | :----: | :----------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Type      | Строка |      Да      | Тип (Может быть: DataByRepairs - заказ наряды, DataByOrders - заказ клиента, DataBySales - реализация, proParck/new - подписка на инструмент, proParck/refund - возврат инструмента из подписки, proParck/replacement) - замена инструмента в подписке |
| Event     | Строка |      Да      | Событие (Сейчас только Update, в будущем могут быть New, Delete)                                                                                                                                                                                       |
| [Data](#data-push)      | Массив |      Да      | Данные для обработки                                                                                                                                                                                                                                   |

#### **Data push:**

| Параметры |  Тип   | Обязательный | Описание                      |
| --------- | :----: | :----------: | :---------------------------- |
| DataType  | Строка |      Да      | Тип данных (пока только GUID) |
| GUID      | Строка |      Да      | Идентификатор документа       |

### Пример

**Тело запроса в формате _JSON_**:

```json
[
  {
    "Type": "DataByRepairs",
    "Event": "Update",
    "Data": [
      {
        "DataType": "GUID",
        "GUID": "312cb992-ab8a-11ed-81b3-00155df43005"
      }
    ]
  }
]
```
---

## Личный кабинет клиента

---

## Indicatorsinfo

### Описание

Предназначен для получения информации о свойствах показателей личного кабинета из 1С

Метод - **GET**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/IndicatorsInfo
```

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание              |
| ------------- | :---------: | :----------: | :-------------------- |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)   |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)   |
| Indicators    |   Массив    |      Да      | Массив с показателями |

**Indicators:**

| Параметры    |     Тип     | Обязательный | Описание                                                                                                                                                          |
| ------------ | :---------: | :----------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| GUID         | Строка (36) |      Да      | Идентификатор показателя                                                                                                                                          |
| Name         |   Строка    |      Да      | Наименование показателя в 1С                                                                                                                                      |
| Availability |   Булево    |      Да      | Признак доступности использования                                                                                                                                 |
| Category     |   Строка    |      Да      | Наименование категории показателя                                                                                                                                 |
| TypeValue    |   Строка    |      Да      | Определяет в каком виде будут передавать данные. Значение - одиночное значение. Массив - массив структур (структуры не стандартизованы и заменяют таблицы данных) |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/IndicatorsInfo
```

**Тело запроса в формате _JSON_**:

```json
{
    "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64"
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "Indicators": [
            {
                "GUID": "fb37c489-13f1-11ec-b9ac-04d9f5ae0305",
                "Name": "Выдано подмен",
                "Availability": true,
                "Category": "Ремонт",
                "TypeValue": "Значение"
            },
            {
                "GUID": "fb37c48a-13f1-11ec-b9ac-04d9f5ae0305",
                "Name": "Дата первого заказа",
                "Availability": true,
                "Category": "Покупки",
                "TypeValue": "Массив"
            }
        ]
    },
    "error": null
}
```

---

## CustomerObjects

### Описание

Предназначен для создания объектов клиентов в 1С

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/customer/objects/{guid}
```
где guid - уникальный идентификатор клиента

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип      | Обязательный | Описание                           |
| ------------- | :----------: | :----------: | :--------------------------------- |
| TransactionID | Строка (36)  |     Нет      | [См. общее](#общее)                |
| SourceID      | Строка (36)  |      Да      | [См. общее](#общее)                |
| Name          | Строка (150) |      Да      | Наименование объекта клиента       |
| Adress        | Строка (500) |      Да      | Адрес объекта клиента              |
| ContactPerson |    Объект    |      Да      | Контактное лицо по объекту клиента |

**ContactPerson:**

| Параметры |     Тип      | Обязательный | Описание          |
| --------- | :----------: | :----------: | :---------------- |
| Name      | Строка (100) |      Да      | ФИО               |
| Post      | Строка (150) |      Да      | Должность         |
| Phone     | Строка (500) |      Да      | Номер телефона    |
| Email     | Строка (500) |      Да      | Электронная почта |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры        |     Тип     | Обязательный | Описание                                 |
| ---------------- | :---------: | :----------: | :--------------------------------------- |
| TransactionID    | Строка (36) |     Нет      | [См. общее](#общее)                      |
| SourceID         | Строка (36) |      Да      | [См. общее](#общее)                      |
| ClientObjectGUID | Строка (36) |      Да      | Идентификатор созданного объекта клиента |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/customer/objects/49eafec7-9772-11e9-80d7-0050569133d8
```

**Тело запроса в формате _JSON_**:

```json
{
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
    "Name": "Объект на Арбате",
    "Adress": "Москва, ул. Арбат ...",
    "ContactPerson": {
        "Name": "Иванов Иван Иванович",
        "Post": "Директор",
        "Phone": "+7(***)-**-**",
        "Email": "mail@mail.com"
    }
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
        "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
        "ClientObjectGUID": "f33e3bce-8136-11ed-81b1-00155df43005"
    },
    "error": null,
    "errorCode": null
}
```

---

## Indicators

### Описание

Предназначен для получения данных показателей личного кабинета. По списку или всех настроенных

Метод - **GET**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/indicators/{guid}
```
где guid - уникальный идентификатор личного кабинета, строка (36)

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры                    |     Тип     | Обязательный | Описание                                                                                                                                                                                                |
| ---------------------------- | :---------: | :----------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| TransactionID                | Строка (36) |     Нет      | [См. общее](#общее)                                                                                                                                                                                     |
| SourceID                     | Строка (36) |      Да      | [См. общее](#общее)                                                                                                                                                                                     |
| ИдентификаторЛичногоКабинета | Строка (36) |      Да      | Уникальный GUID личного кабинета клиента (используется для логирования)                                                                                                                                 |
| Indicators                   |   Массив    |      Да      | Массив GUID - ов показателей. Если передан конкретный массив показателей, данные вернуться по нему, если массив пуст, то сервис вернет данные показателей, связанных с личным кабинетом в настройках 1С |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры                    |     Тип     | Обязательный | Описание                     |
| ---------------------------- | :---------: | :----------: | :--------------------------- |
| TransactionID                | Строка (36) |     Нет      | [См. общее](#общее)          |
| SourceID                     | Строка (36) |      Да      | [См. общее](#общее)          |
| ИдентификаторЛичногоКабинета | Строка (36) |      Да      | Возвращаются из тела запроса |
| IndicatorsValues             |   Массив    |      Да      | Массив данных показателей    |

**IndicatorsValues:**

| Параметры     |             Тип             | Обязательный | Описание            |
| ------------- | :-------------------------: | :----------: | :------------------ |
| GUIDIndicator |         Строка (36)         |      Да      | GUID показателя     |
| Value         | Строка, Число, Дата, Булево |      Да      | Значение показателя |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/indicators/9eb6e451-a000-4c40-b346-5615e0856e2d
```

**Тело запроса в формате _JSON_**:

```json
{
    "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "ИдентификаторЛичногоКабинета": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "Indicators": []
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "ИдентификаторЛичногоКабинета": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "IndicatorsValues": [
            {
                "GUIDIndicator": "fb37c489-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": 82
            },
            {
                "GUIDIndicator": "fb37c48a-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": "2020-08-13T15:32:52+03:00"
            },
            {
                "GUIDIndicator": "fb37c48d-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": 7
            },
            {
                "GUIDIndicator": "fb37c48b-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": "2021-10-21T14:44:00+03:00"
            },
            {
                "GUIDIndicator": "fb37c48c-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": 3907941.74
            },
            {
                "GUIDIndicator": "fb37c48e-13f1-11ec-b9ac-04d9f5ae0304",
                "Value": 27
            }
        ]
    },
    "error": null
}
```

---

## PersonalAcc

### Описание

Предназначен для отправки данных ЛК клиента на сайт (сервис на стороне сайта)

Метод - **POST**

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                  |
| --------- | :----: | :----------: | :------------------------ |
| Header    | Объект |      Да      | Общие данные сообщения    |
| Body      | Объект |      Да      | Основные данные сообщения |

**Header:**

| Параметры         |         Тип          | Обязательный | Описание                                             |
| ----------------- | :------------------: | :----------: | :--------------------------------------------------- |
| Request_ID        |     Строка (36)      |      Да      | Идентификатор запроса                                |
| Data_Type         | Строка идентификатор |      Да      | Тип данных (на данный момент только PersonalAccount) |
| Count_Master_Data |        Число         |      Да      | Количество личных кабинетов в Body-PersonalAccounts  |

**Body:**

| Параметры        |  Тип   | Обязательный | Описание                       |
| ---------------- | :----: | :----------: | :----------------------------- |
| PersonalAccounts | Массив |      Да      | Массив данных личного кабинета |

**PersonalAccounts:**

| Параметры       |     Тип     | Обязательный | Описание                                        |
| --------------- | :---------: | :----------: | :---------------------------------------------- |
| GUID            | Строка (36) |      Да      | Идентификатор ЛК                                |
| Name            |   Строка    |      Да      | Наименование ЛК                                 |
| ContactPerson   |   Объект    |      Да      | Данные контактного лица                         |
| FreeShipping    |   Булево    |      Да      | Признак бесплатной доставки                     |
| FieldOfActivity |   Строка    |      Да      | Сфера деятельности                              |
| CompanySize     |    Число    |      Да      | Размер компании (кол-во сотрудников)            |
| Address         |   Строка    |      Да      | Адрес компании                                  |
| PostalCode      |   Строка    |      Да      | Пустая строка (на данный момент не заполняется) |
| Website         |   Строка    |      Да      | Адрес веб-сайта                                 |
| email           |   Строка    |      Да      | Адрес электронной почты                         |
| Phone           |   Строка    |      Да      | Номер телефона                                  |
| INN             |   Строка    |      Да      | ИНН                                             |
| KPP             |   Строка    |      Да      | КПП                                             |
| OGRN            |   Строка    |      Да      | ОГРН                                            |
| BankAccount     |   Объект    |      Да      | Данные счета                                    |
| Customers       |   Массив    |      Да      | Связанные клиенты                               |
| Indicators      |   Массив    |      Да      | Данные показателей                              |

**ContactPerson:**

| Параметры |             Тип             | Обязательный | Описание               |
| --------- | :-------------------------: | :----------: | :--------------------- |
| GUID      |         Строка (36)         |      Да      | Идентификатор контакта |
| Name      |           Строка            |      Да      | ФИО                    |
| Post      |           Строка            |      Да      | Должность              |
| Birthday  | Дата (строка в формате UTC) |      Да      | Дата рождения          |

**BankAccount:**

| Параметры |  Тип   | Обязательный | Описание    |
| --------- | :----: | :----------: | :---------- |
| BIK       | Строка |      Да      | БИК банка   |
| Account   | Строка |      Да      | Номер счета |

**Customers:**

| Параметры     |     Тип     | Обязательный | Описание                   |
| ------------- | :---------: | :----------: | :------------------------- |
| GUID          | Строка (36) |      Да      | Идентификатор контрагента  |
| Name          |   Строка    |      Да      | Наименование               |
| INN           |   Строка    |      Да      | ИНН                        |
| KPP           |   Строка    |      Да      | КПП                        |
| MAIN          |   Булево    |      Да      | Признак основного клиента  |
| Manager       |   Объект    |      Да      | Данные по менеджеру        |
| ClientObject  |   Массив    |      Да      | Данные по объектам         |
| ContactPerson |   Объект    |      Да      | Данные по контактному лицу |

**Manager:**

| Параметры |     Тип     | Обязательный | Описание                |
| --------- | :---------: | :----------: | :---------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор менеджера |
| name      |   Строка    |      Да      | ФИО                     |
| email     |   Строка    |      Да      | Электронная почта       |
| phone     |   Строка    |      Да      | Номер телефона          |

**ClientObject:**

| Параметры      |     Тип     | Обязательный | Описание                      |
| -------------- | :---------: | :----------: | :---------------------------- |
| GUID           | Строка (36) |      Да      | Идентификатор объекта         |
| Name           |   Строка    |      Да      | Наименование объекта          |
| Adress         |   Строка    |      Да      | Адрес объекта                 |
| ContactPersons |   Массив    |      Да      | Массив контактов объекта      |
| Files          |   Массив    |      Да      | Массив изображений по объекту |

**ContactPersons:**

| Параметры |     Тип     | Обязательный | Описание               |
| --------- | :---------: | :----------: | :--------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор контакта |
| Name      |   Строка    |      Да      | ФИО                    |
| Phone     |   Строка    |      Да      | Номер телефона         |
| Email     |   Строка    |      Да      | Электронная почта      |

**Files:**

| Параметры |     Тип     | Обязательный | Описание                  |
| --------- | :---------: | :----------: | :------------------------ |
| GUID      | Строка (36) |      Да      | Идентификатор изображения |
| Name      |   Строка    |      Да      | Наименование изображения  |

**ContactPerson:**

| Параметры |     Тип     | Обязательный | Описание               |
| --------- | :---------: | :----------: | :--------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор контакта |
| Name      |   Строка    |      Да      | ФИО                    |
| Phone     |   Строка    |      Да      | Номер телефона         |
| Email     |   Строка    |      Да      | Электронная почта      |

**Indicators:**

| Параметры |     Тип     | Обязательный | Описание                 |
| --------- | :---------: | :----------: | :----------------------- |
| Name      |   Строка    |      Да      | Идентификатор показателя |
| GUID      | Строка (36) |      Да      | Наименование             |

### Пример

**Тело запроса в формате _JSON_**:

```json
{
    "Header": {
        "Request_ID": "db76551d-5a02-489d-85e9-1b6c45b516f1",
        "Data_Type": "PersonalAccount",
        "Count_Master_Data": 1
    },
    "Body": {
        "PersonalAccounts": [
            {
                "GUID": "9eb6e451-a000-4c40-b346-5615e0856e2d",
                "Name": "БАРС ООО",
                "ContactPerson": {
                    "GUID": "de2fa533-3ad9-11eb-b990-04d9f5ae0304",
                    "Name": "Ольга",
                    "Post": "",
                    "Birthday": "0001-01-01T00:00:00+00:00"
                },
                "FreeShipping": "false",
                "FieldOfActivity": "Продажа инструментов",
                "CompanySize": 1000,
                "Address": "455034, Челябинская обл, Магнитогорск г, Жукова ул, дом xx",
                "PostalCode": "",
                "Website": "",
                "email": "xxx@xxx.xxx",
                "Phone": "(3519) 40-69-xx",
                "INN": "74550185xx",
                "KPP": "7455010xx",
                "OGRN": "",
                "BankAccount": {
                    "BIK": "047501602",
                    "Account": "40702810972000006200"
                },
                "Customers": [
                    {
                        "GUID": "d2ef78e4-7e5f-11ea-b97f-04d9f5ae0304",
                        "Name": "БАРС ООО",
                        "INN": "74550185xx",
                        "KPP": "7455010xx",
                        "MAIN": true,
                        "Manager": {
                            "GUID": "d2ef78e4-7e5f-11ea-b97f-04d9f5ae0304",
                            "name": "Комаров Иван",
                            "email": "xxx@xxx.xxx",
                            "phone": ""
                        },
                        "ClientObject": [
                            {
                                "GUID": "de2fa533-3ad9-11eb-b990-04d9f5ae0304",
                                "Name": "ЖК Императорские Мытищи",
                                "Adress": "Тенистый бульвар 19",
                                "ContactPersons": [
                                    {
                                        "GUID": "79ad8c9e-e3be-11eb-b9a8-04d9f5ae0304",
                                        "Name": "Комаров Иван",
                                        "Phone": "911",
                                        "Email": "xxx@xxx.xxx"
                                    }
                                ],
                                "Files": [
                                    {
                                        "Name": "ЖК Императорские Мытищи (фото)",
                                        "GUID": "79ad8c9e-e3be-11eb-b9a8-04d9f5ae0304"
                                    }
                                ]
                            }
                        ],
                        "ContactPerson": {
                            "GUID": "79ad8c9e-e3be-11eb-b9a8-04d9f5ae0304",                            
                            "Name": "Комаров Иван",
                            "Phone": "911",
                            "Email": "xxx@xxx.xxx"
                        }
                    }
                ],
                "Indicators": [
                    {
                        "Name": "Выдано подмен",
                        "GUID": "fb37c489-13f1-11ec-b9ac-04d9f5ae0304"
                    },
                    {
                        "Name": "Дата первого заказа",
                        "GUID": "fb37c48a-13f1-11ec-b9ac-04d9f5ae0304"
                    },
                    {
                        "Name": "Доля инструментов",
                        "GUID": "967b4e54-489c-11ec-b9b5-04d9f5ae0304"
                    }
                ]
            }
        ]
    }
}
```

---

## priceconditions

### Описание

Предназначен для получения данных о скидках на дату для списка личных кабинетов

Метод - **GET**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/priceconditions
```
Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры           |             Тип             | Обязательный | Описание                              |
| ------------------- | :-------------------------: | :----------: | :------------------------------------ |
| TransactionID       |         Строка (36)         |     Нет      | [См. общее](#общее)                   |
| SourceID            |         Строка (36)         |      Да      | [См. общее](#общее)                   |
| GUIDPersonalAccount |           Массив            |      Да      | Массив GUID личных кабинетов клиентов |
| Period              | Дата (строка в формате UTC) |      Да      | Дата, на которую рассчитываем скидки  |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры            |             Тип             | Обязательный | Описание                          |
| -------------------- | :-------------------------: | :----------: | :-------------------------------- |
| TransactionID        |         Строка (36)         |     Нет      | [См. общее](#общее)               |
| SourceID             |         Строка (36)         |      Да      | [См. общее](#общее)               |
| GUIDPersonalAccount  |         Строка (36)         |      Да      | Возвращается из тела запроса      |
| Period               | Дата (строка в формате UTC) |      Да      | Возвращается из тела запроса      |
| PersonalAccountsData |           Массив            |      Да      | Массив данных по личному кабинету |

**PersonalAccountsData:**

| Параметры           |     Тип     | Обязательный | Описание                      |
| ------------------- | :---------: | :----------: | :---------------------------- |
| GUIDPersonalAccount | Строка (36) |      Да      | GUID личного кабинета клиента |
| Discounts           |   Массив    |      Да      | Массив скидок                 |

**Discounts:**

| Параметры       |     Тип     | Обязательный | Описание                                           |
| --------------- | :---------: | :----------: | :------------------------------------------------- |
| DiscountType    | Строка (36) |      Да      | Тип скидки (варианты: Номенклатура, ЦеноваяГруппа) |
| DiscountSubject |   Строка    |      Да      | GUID номенклатуры или название ценовой группы      |
| Value           |    Число    |      Да      | Значение                                           |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/priceconditions
```

**Тело запроса в формате _JSON_**:

```json
{
    "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
    "GUIDPersonalAccount": ["0d2fd304-07ef-4f32-9a76-2b7d820e2c64", "af121775-4d15-44c5-9e49-2565777c52ff"],
    "Period": "2021-10-01T00:00:00+03:00" 
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "SourceID": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
        "GUIDPersonalAccount": [
            "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
            "af121775-4d15-44c5-9e49-2565777c52ff"
        ],
        "Period": "2021-10-01T00:00:00+03:00",
        "PersonalAccountsData": [
            {
                "GUIDPersonalAccount": "0d2fd304-07ef-4f32-9a76-2b7d820e2c64",
                "Discounts": [
                    {
                        "DiscountType": "Номенклатура",
                        "DiscountSubject": "96aa282b-09c1-11ec-b9a9-04d9f5ae0304",
                        "Value": 1
                    },
                    {
                        "DiscountType": "ЦеноваяГруппа",
                        "DiscountSubject": "Электро DW",
                        "Value": 5
                    }
                ]
            },
            {
                "GUIDPersonalAccount": "af121775-4d15-44c5-9e49-2565777c52ff",
                "Discounts": [
                    {
                        "DiscountType": "ЦеноваяГруппа",
                        "DiscountSubject": "Крепеж DEWALT",
                        "Value": 20
                    },
                    {
                        "DiscountType": "ЦеноваяГруппа",
                        "DiscountSubject": "Электро DW SP",
                        "Value": 5
                    }
                ]
            }
        ]
    },
    "error": null
}
```

---

## Товары

---

## Product

### Описание

Предназначен для отправки данных номенклатуры на сайт (сервис на стороне сайта)

Метод - **POST**

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                  |
| --------- | :----: | :----------: | :------------------------ |
| Header    | Объект |      Да      | Общие данные сообщения    |
| Body      | Объект |      Да      | Основные данные сообщения |

**Header:**

| Параметры         |         Тип          | Обязательный | Описание                      |
| ----------------- | :------------------: | :----------: | :---------------------------- |
| Request_ID        |     Строка (36)      |      Да      | Идентификатор запроса         |
| Data_Type         | Строка идентификатор |      Да      | Тип данных                    |
| Count_Master_Data |        Число         |      Да      | Количество выгружаемых данных |

**Body:**

| Параметры        |  Тип   | Обязательный | Описание               |
| ---------------- | :----: | :----------: | :--------------------- |
| Products         | Массив |      Да      | Массив номенклатур     |
| Products_Section | Массив |      Да      | Массив данных каталога |
| Categories       | Массив |      Да      | Массив категорий       |

**Products:**

| Параметры      |     Тип     | Обязательный | Описание                           |
| -------------- | :---------: | :----------: | :--------------------------------- |
| GUID           | Строка (36) |      Да      | Массив номенклатур                 |
| IsGroup        |   Булево    |      Да      | Признак группы                     |
| Article_Number |   Строка    |      Да      | Артикул                            |
| Code           |   Строка    |      Да      | Код номенклатуры                   |
| Name           |   Строка    |      Да      | Наименование номенклатуры          |
| Full_Name      |   Строка    |      Да      | Полное наименование номенклатуры   |
| Description    |   Строка    |      Да      | Описание номенклатуры              |
| Section_GUID   |   Массив    |      Да      | Массив идентификаторов Каталогов   |
| Category_GUID  | Строка (36) |      Да      | Идентификатор категории            |
| Price_Group    |   Строка    |      Да      | Ценовая группа                     |
| IsNew          |   Булево    |      Да      | признак *Это новинка* номенклатуры |
| ProParck       |   Объект    |     Нет      | Данные подписки ProParck           |
| Properties     |   Объект    |      Да      | Свойства номенклатуры              |

**ProParck:**

| Параметры |     Тип     | Обязательный | Описание                    |
| --------- | :---------: | :----------: | :-------------------------- |
| Phase     | Строка (36) |      Да      | Массив этапов строительства |

**Properties:**

| Параметры        |             Тип             | Обязательный | Описание                                          |
| ---------------- | :-------------------------: | :----------: | :------------------------------------------------ |
| Brand            |           Строка            |      Да      | Бренд                                             |
| ExclusiveB2B     |           Булево            |      Да      | Признак B2B                                       |
| NewProduct       |           Булево            |      Да      | Признак новой номенклатуры                        |
| Popular          |           Булево            |      Да      | Признак популярной номенклатуры                   |
| Sales            |           Булево            |      Да      | Признак распродажа (скидки)                       |
| Seasonal         |           Булево            |      Да      | Признак сезонный                                  |
| Price            |            Число            |     Нет      | Цена номенклатуры (по выбранному виду цен в 1С)   |
| PriceDate        | Дата (строка в формате UTC) |     Нет      | Дата установки цены                               |
| SecondPrice      |            Число            |     Нет      | Вторая цена (по второму выбранному виду цен в 1С) |
| QuantityOfStock  |            Число            |     Нет      | Остаток                                           |
| PathFTPImageFile |           Строка            |     Нет      | Файл в FTP                                        |

**Products_Section:**

| Параметры   |     Тип     | Обязательный | Описание                                 |
| ----------- | :---------: | :----------: | :--------------------------------------- |
| GUID        | Строка (36) |      Да      | Идентификатор каталога                   |
| IsGroup     |   Булево    |      Да      | Признак группы                           |
| Code        | Строка (36) |      Да      | Код                                      |
| Name        |   Строка    |      Да      | Наименование каталога                    |
| Parent_GUID | Строка (36) |      Да      | Идентификатор родителя родителя каталога |

**Categories:**

| Параметры |     Тип     | Обязательный | Описание                             |
| --------- | :---------: | :----------: | :----------------------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор категории номенклатуры |
| Code      |   Строка    |      Да      | Код                                  |
| Name      |   Строка    |      Да      | Наименование                         |

### Пример

**Тело запроса в формате _JSON_**:

```json
{
    "Header": {
        "Request_ID": "1d534e84-0c30-492e-8dcd-0e51bfe095cd",
        "Data_Type": "Products",
        "Count_Master_Data": 2
    },
    "Body": {
        "Products": [{
                "GUID": "300465dd-7de8-11ec-b9bc-001b21b3a70e",
                "IsGroup": false,
                "Article_Number": "DW100DR-PL",
                "Code": "НФ-00239628",
                "Name": "Алмазная шлифовальная чашка. Размером 100MM X B 16/20X5X8 MM DCUT",
                "Full_Name": "Алмазная шлифовальная чашка. Размером 100MM X B 16/20X5X8 MM DCUT",
                "Description": "",
                "Section_GUID": [
                    "3f56822f-ebe6-11ec-81a0-00155df43005"
                ],
                "Category_GUID": "6df736fa-51c4-11ec-b9ba-001b21b3a70e",
                "Price_Group": "Оснастка DCUT",
                "IsNew": true,
                "ProParck": {
                    "Phase": ["3", "5"]
                 },
                "Properties": {
                    "Brand": "",
                    "ExclusiveB2B": false,
                    "NewProduct": false,
                    "Popular": true,
                    "Sales": false,
                    "Seasonal": true,
                    "Price": 500,
                    "PriceDate": "2022-07-12T19:13:19+03:00",
                    "SecondPrice": 500,
                    "QuantityOfStock": 10,
                    "PathFTPImageFile": "11291255_e1c8_11ec_81a0_00155df43005__f85eab3c_ec12_11ec_81a0_00155df43005.jpg"
                }
            },
            {
                "GUID": "f3b8ad1f-e1cb-11ec-81a0-00155df43005",
                "IsGroup": false,
                "Article_Number": "CD14100075055",
                "Code": "НФ-00250312",
                "Name": "Сверло по металлу HSS DRILL BIT - D5.2XL86XWL52 WHITE COLOR 10PC/TUB DCUT",
                "Full_Name": "Сверло по металлу HSS DRILL BIT - D5.2XL86XWL52 WHITE COLOR 10PC/TUB DCUT",
                "Description": "Сверло по металлу HSS DRILL BIT - D5.2XL86XWL52 WHITE COLOR 10PC/TUB",
                "Section_GUID": [
                    "3f56822f-ebe6-11ec-81a0-00155df43005"
                ],
                "Category_GUID": "6df736fa-51c4-11ec-b9ba-001b21b3a70e",
                "Price_Group": "Оснастка DCUT",
                "Properties": {
                    "Brand": "",
                    "ExclusiveB2B": false,
                    "NewProduct": false,
                    "Popular": false,
                    "Sales": false,
                    "Seasonal": false
                }
            }
        ],
        "Products_Section": [{
                "GUID": "3f56822f-ebe6-11ec-81a0-00155df43005",
                "IsGroup": true,
                "Code": "638bcff3-851f-41b1-be2c-47c756d11c12",
                "Name": "Расходные материалы DCUT",
                "Parent_GUID": ""
            },
            {
                "GUID": "b6d43157-e8dc-11ec-81a0-00155df43005",
                "IsGroup": true,
                "Code": "7c76ced0-3bb2-4d73-af34-30a40d7213ac",
                "Name": "Эксклюзив \"до 2х лет без затрат\"",
                "Parent_GUID": ""
            }
        ],
        "Categories": [{
                "GUID": "6df736fa-51c4-11ec-b9ba-001b21b3a70e",
                "Code": "НФ-000056",
                "Name": "Оснастка DCUT"
            },
            {
                "GUID": "22041809-7d7f-11e9-80d3-0050569133d8",
                "Code": "НФ-000026",
                "Name": "Оснастка"
            },
            {
                "GUID": "aab88747-13c7-11eb-b98c-04d9f5ae0304",
                "Code": "НФ-000050",
                "Name": "Инструменты"
            },
            {
                "GUID": "987b2c6e-524b-11e5-9810-3085a93ddca2",
                "Code": "БУ-000001",
                "Name": "Основная номенклатурная группа"
            }
        ]
    }
}
```

---

## Image

### Описание

Предназначен для отправки данных по изображениям номенклатуры на сайт (сервис на стороне сайта)

Метод - **POST**

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                  |
| --------- | :----: | :----------: | :------------------------ |
| Header    | Объект |      Да      | Общие данные сообщения    |
| Body      | Объект |      Да      | Основные данные сообщения |

**Header:**

| Параметры         |         Тип          | Обязательный | Описание                      |
| ----------------- | :------------------: | :----------: | :---------------------------- |
| Request_ID        |     Строка (36)      |      Да      | Идентификатор запроса         |
| Data_Type         | Строка идентификатор |      Да      | Тип данных                    |
| Count_Master_Data |        Число         |      Да      | Количество выгружаемых данных |

**Body:**

| Параметры |  Тип   | Обязательный | Описание           |
| --------- | :----: | :----------: | :----------------- |
| Products  | Массив |      Да      | Массив номенклатур |

**Products:**

| Параметры  |     Тип     | Обязательный | Описание                   |
| ---------- | :---------: | :----------: | :------------------------- |
| GUID       | Строка (36) |      Да      | Идентификатор номенклатуры |
| Properties |   Объект    |      Да      | Свойства                   |

**Properties:**

| Параметры        |  Тип   | Обязательный | Описание   |
| ---------------- | :----: | :----------: | :--------- |
| PathFTPImageFile | Строка |      Да      | Файл в FTP |

### Пример

**Тело запроса в формате _JSON_**:

```json
{
    "Header": {
        "Request_ID": "d1984ebc-a642-405b-8514-a98c07d90ac4",
        "Data_Type": "updatePictures",
        "Count_Master_Data": 3
    },
    "Body": {
        "Products": [{
                "GUID": "300465dd-7de8-11ec-b9bc-001b21b3a70e",
                "Properties": {
                    "PathFTPImageFile": "300465dd_7de8_11ec_b9bc_001b21b3a70e__f0894933_ec0f_11ec_81a0_00155df43005.jpg"
                }
            },
            {
                "GUID": "cc43494a-db3d-11ec-81a0-00155df43005",
                "Properties": {
                    "PathFTPImageFile": "cc43494a_db3d_11ec_81a0_00155df43005__a8681ed4_e0e1_11ec_81a0_00155df43005.jpg"
                }
            },
            {
                "GUID": "11291255-e1c8-11ec-81a0-00155df43005",
                "Properties": {
                    "PathFTPImageFile": "11291255_e1c8_11ec_81a0_00155df43005__f85eab3c_ec12_11ec_81a0_00155df43005.jpg"
                }
            }
        ]
    }
}
```

---

## Price

### Описание

Предназначен для отправки данных по ценам номенклатуры на сайт (сервис на стороне сайта)

Метод - **POST**

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                  |
| --------- | :----: | :----------: | :------------------------ |
| Header    | Объект |      Да      | Общие данные сообщения    |
| Body      | Объект |      Да      | Основные данные сообщения |

**Header:**

| Параметры         |         Тип          | Обязательный | Описание                      |
| ----------------- | :------------------: | :----------: | :---------------------------- |
| Request_ID        |     Строка (36)      |      Да      | Идентификатор запроса         |
| Data_Type         | Строка идентификатор |      Да      | Тип данных                    |
| Count_Master_Data |        Число         |      Да      | Количество выгружаемых данных |

**Body:**

| Параметры |  Тип   | Обязательный | Описание           |
| --------- | :----: | :----------: | :----------------- |
| Products  | Массив |      Да      | Массив номенклатур |

**Products:**

| Параметры  |     Тип     | Обязательный | Описание                   |
| ---------- | :---------: | :----------: | :------------------------- |
| GUID       | Строка (36) |      Да      | Идентификатор номенклатуры |
| Properties |   Объект    |      Да      | Свойства                   |

**Properties:**

| Параметры   |             Тип             | Обязательный | Описание                                          |
| ----------- | :-------------------------: | :----------: | :------------------------------------------------ |
| Price       |            Число            |      Да      | Цена номенклатуры (по выбранному виду цен в 1С)   |
| PriceDate   | Дата (строка в формате UTC) |      Да      | Дата установки цены                               |
| SecondPrice |            Число            |      Да      | Вторая цена (по второму выбранному виду цен в 1С) |

### Пример

**Тело запроса в формате _JSON_**:

```json
{
    "Header": {
        "Request_ID": "cfcdaea0-2361-4e96-b06c-87405e380aeb",
        "Data_Type": "Price",
        "Count_Master_Data": 2
    },
    "Body": {
        "Products": [{
                "GUID": "470d847b-ebf4-11ec-81a0-00155df43005",
                "Properties": {
                    "Price": 22607,
                    "PriceDate": "2022-07-12T19:13:19+03:00",
                    "SecondPrice": 22607
                }
            },
            {
                "GUID": "4894d920-ebe7-11ec-81a0-00155df43005",
                "Properties": {
                    "Price": 17927,
                    "PriceDate": "2022-07-12T19:13:19+03:00",
                    "SecondPrice": 17927
                }
            }
        ]
    }
}
```

---

## Stock

### Описание

Предназначен для отправки данных по остаткам номенклатуры на сайт (сервис на стороне сайта)

Метод - **POST**

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры |  Тип   | Обязательный | Описание                  |
| --------- | :----: | :----------: | :------------------------ |
| Header    | Объект |      Да      | Общие данные сообщения    |
| Body      | Объект |      Да      | Основные данные сообщения |

**Header:**

| Параметры         |         Тип          | Обязательный | Описание                      |
| ----------------- | :------------------: | :----------: | :---------------------------- |
| Request_ID        |     Строка (36)      |      Да      | Идентификатор запроса         |
| Data_Type         | Строка идентификатор |      Да      | Тип данных                    |
| Count_Master_Data |        Число         |      Да      | Количество выгружаемых данных |

**Body:**

| Параметры |  Тип   | Обязательный | Описание           |
| --------- | :----: | :----------: | :----------------- |
| Products  | Массив |      Да      | Массив номенклатур |

**Products:**

| Параметры  |     Тип     | Обязательный | Описание                   |
| ---------- | :---------: | :----------: | :------------------------- |
| GUID       | Строка (36) |      Да      | Идентификатор номенклатуры |
| Properties |   Объект    |      Да      | Свойства                   |

**Properties:**

| Параметры               |  Тип   | Обязательный | Описание                       |
| ----------------------- | :----: | :----------: | :----------------------------- |
| QuantityOfStock         | Число  |      Да      | Остаток по текущей организации |
| QuantityOfStockSupplier | Строка |      Да      | Остаток по поставщику          |

### Пример

**Тело запроса в формате _JSON_**:

```json
{
    "Header": {
        "Request_ID": "ff104b78-6b25-45dc-a5df-f696c9d104c3",
        "Data_Type": "QuantityOfStock",
        "Count_Master_Data": 3
    },
    "Body": {
        "Products": [{
                "GUID": "1e503ac1-7de0-11ec-b9bc-001b21b3a70e",
                "Properties": {
                    "QuantityOfStock": 1,
                    "QuantityOfStockSupplier": ""
                }
            },
            {
                "GUID": "19625c3d-c654-11e9-80db-0050569133d8",
                "Properties": {
                    "QuantityOfStock": 0,
                    "QuantityOfStockSupplier": ">500"
                }
            },
            {
                "GUID": "e417ee1b-ee88-11e8-80d9-005056913ce7",
                "Properties": {
                    "QuantityOfStock": 2,
                    "QuantityOfStockSupplier": "21135"
                }
            }
        ]
    }
}
```

---

## ProParck

---

## ProParckRefund

### Описание

Предназначен для получения данных документа Возврат инструмента из подписки

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/refund/{guid}
```

где guid (строка 36) идентификатор документа

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |
| Documents     |   Объект    |      Да      | Данные документа    |

**Documents:**

| Параметры        |             Тип             | Обязательный | Описание                                   |
| ---------------- | :-------------------------: | :----------: | :----------------------------------------- |
| GUIDDocument     |         Строка (36)         |      Да      | Уникальный GUID документа                  |
| GUIDCustomer     |         Строка (36)         |      Да      | Уникальный GUID контрагента                |
| ClientObjectGUID |         Строка (36)         |      Да      | Уникальный GUID объекта контрагента        |
| Number           |           Строка            |      Да      | Номер документа                            |
| Date             | Дата (строка в формате UTC) |      Да      | Дата документа                             |
| GUIDRequest      |         Строка (36)         |      Да      | Уникальный GUID документа основания Заявки |
| Products         |           Массив            |      Да      | Данные табличной части                     |

**Products:**

| Параметры    |     Тип     | Обязательный | Описание                                         |
| ------------ | :---------: | :----------: | :----------------------------------------------- |
| GUIDProParck | Строка (36) |      Да      | Уникальный GUID документа Подписка на инструмент |
| NumberSub    |   Строка    |      Да      | Номер документа Подписка на инструмент           |
| ItemGUID     | Строка (36) |      Да      | Уникальный GUID номенклатуры (инструмента)       |
| Article      |   Строка    |      Да      | Артикул                                          |
| Serial       |   Строка    |      Да      | Серийный номер                                   |
| Quantity     |    Число    |      Да      | Количество                                       |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/proParck/refund/6444c088-bd12-11ed-81b6-00155df43005
```

**Тело запроса в формате _JSON_**:

```json
{    
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c"
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
        "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
        "Documents": {
            "ProParckRefund": [
                {
                    "GUIDDocument": "6ae193de-c4b4-11ed-81b7-00155df43005",
                    "GUIDCustomer": "8aa517ea-cc24-11ea-b98b-04d9f5ae0304",
                    "ClientObjectGUID": "a04bf661-3adc-11eb-b990-04d9f5ae0304",
                    "Number": "РР-00000001",
                    "Date": "2023-03-17T14:11:09+03:00",
                    "GUIDRequest": "639d65d9-c4b4-11ed-81b7-00155df43005",
                    "Products": [
                        {
                            "GUIDProParck": "6444c088-bd12-11ed-81b6-00155df43005",
                            "NumberSub": "РР-00000001",
                            "ItemGUID": "24c99a24-7729-11ea-b97f-04d9f5ae0304",
                            "Article": "D25153K-KS",
                            "Serial": "000025",
                            "Quantity": 1
                        }
                    ]
                }
            ]
        }
    },
    "error": null,
    "errorCode": null
}
```

---

## ProParckReplacement

### Описание

Предназначен для получения данных документа Замена инструмента в подписке

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/replacement/{guid}
```

где guid (строка 36) идентификатор документа

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |
| Documents     |   Объект    |      Да      | Данные документа    |

**Documents:**

| Параметры           |  Тип   | Обязательный | Описание                                               |
| ------------------- | :----: | :----------: | :----------------------------------------------------- |
| ProParckReplacement | Массив |      Да      | Массив данных документов Замена инструмента в подписке |

**ProParckReplacement:**

| Параметры        |             Тип             | Обязательный | Описание                                   |
| ---------------- | :-------------------------: | :----------: | :----------------------------------------- |
| GUIDDocument     |         Строка (36)         |      Да      | Уникальный GUID документа                  |
| GUIDCustomer     |         Строка (36)         |      Да      | Уникальный GUID контрагента                |
| ClientObjectGUID |         Строка (36)         |      Да      | Уникальный GUID объекта контрагента        |
| Number           |           Строка            |      Да      | Номер документа                            |
| Date             | Дата (строка в формате UTC) |      Да      | Дата документа                             |
| GUIDRequest      |         Строка (36)         |      Да      | Уникальный GUID документа основания Заявки |
| Products         |           Массив            |      Да      | Данные табличной части                     |

**Products:**

| Параметры    |     Тип     | Обязательный | Описание                                                           |
| ------------ | :---------: | :----------: | :----------------------------------------------------------------- |
| GUIDProParck | Строка (36) |      Да      | Уникальный GUID документа Подписка на инструмент                   |
| NumberSub    |   Строка    |      Да      | Номер документа Подписка на инструмент                             |
| ItemGUID     | Строка (36) |      Да      | Уникальный GUID номенклатуры (инструмента) которая заменяется      |
| Article      |   Строка    |      Да      | Артикул (который заменяется)                                       |
| Serial       |   Строка    |      Да      | Серийный номер (который заменяется)                                |
| ItemGUIDTo   | Строка (36) |      Да      | Уникальный GUID номенклатуры (инструмента) на который будет замена |
| ArticleTo    |   Строка    |      Да      | Артикул (на который заменяется)                                    |
| SerialTo     |   Строка    |      Да      | Серийный номер (на который заменяется)                             |
| Quantity     |    Число    |      Да      | Количество                                                         |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/proParck/replacement/41ffdaf4-c4b4-11ed-81b7-00155df43005
```

**Тело запроса в формате _JSON_**:

```json
{    
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c"
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
        "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
        "Documents": {
            "ProParckReplacement": [
                {
                    "GUIDDocument": "41ffdaf4-c4b4-11ed-81b7-00155df43005",
                    "GUIDCustomer": "8aa517ea-cc24-11ea-b98b-04d9f5ae0304",
                    "ClientObjectGUID": "a04bf661-3adc-11eb-b990-04d9f5ae0304",
                    "Number": "РР-00000001",
                    "Date": "2023-03-17T14:10:00+03:00",
                    "GUIDRequest": "b681d4af-c4b3-11ed-81b7-00155df43005",
                    "Products": [
                        {
                            "GUIDProParck": "6444c088-bd12-11ed-81b6-00155df43005",
                            "NumberSub": "РР-00000001",
                            "ItemGUID": "24c99a24-7729-11ea-b97f-04d9f5ae0304",
                            "Article": "D25153K-KS",
                            "Serial": "000007",
                            "ItemGUIDTo": "24c99a24-7729-11ea-b97f-04d9f5ae0304",
                            "ArticleTo": "D25153K-KS",
                            "SerialTo": "000025",
                            "Quantity": 1
                        }
                    ]
                }
            ]
        }
    },
    "error": null,
    "errorCode": null
}
```

---

## ProParckNew

### Описание

Предназначен для получения данных документа Подписка на инструмент

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/new/{guid}
```

где guid (строка 36) идентификатор документа

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание            |
| ------------- | :---------: | :----------: | :------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее) |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее) |
| Documents     |   Объект    |      Да      | Данные документа    |

**Documents:**

| Параметры   |  Тип   | Обязательный | Описание                                        |
| ----------- | :----: | :----------: | :---------------------------------------------- |
| ProParckNew | Массив |      Да      | Массив данных документов Подписка на инструмент |

**ProParckNew:**

| Параметры        |             Тип             | Обязательный | Описание                                   |
| ---------------- | :-------------------------: | :----------: | :----------------------------------------- |
| GUIDDocument     |         Строка (36)         |      Да      | Уникальный GUID документа                  |
| GUIDCustomer     |         Строка (36)         |      Да      | Уникальный GUID контрагента                |
| ClientObjectGUID |         Строка (36)         |      Да      | Уникальный GUID объекта контрагента        |
| NumberSub        |           Строка            |      Да      | Номер подписки                             |
| Date             | Дата (строка в формате UTC) |      Да      | Дата документа                             |
| StartDate        | Дата (строка в формате UTC) |      Да      | Дата начала действия подписки              |
| GUIDRequest      |         Строка (36)         |      Да      | Уникальный GUID документа основания Заявки |
| Products         |           Массив            |      Да      | Данные табличной части                     |

**Products:**

| Параметры |     Тип     | Обязательный | Описание                                   |
| --------- | :---------: | :----------: | :----------------------------------------- |
| ItemGUID  | Строка (36) |      Да      | уникальный GUID номенклатуры (инструмента) |
| Serial    |   Строка    |      Да      | Серийный номер                             |
| Article   |   Строка    |      Да      | Артикул                                    |
| Quantity  |    Число    |      Да      | Количество                                 |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/proParck/new/6444c088-bd12-11ed-81b6-00155df43005
```

**Тело запроса в формате _JSON_**:

```json
{    
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c"
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
        "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
        "Documents": {
            "ProParckNew": [
                {
                    "GUIDDocument": "6444c088-bd12-11ed-81b6-00155df43005",
                    "GUIDCustomer": "8aa517ea-cc24-11ea-b98b-04d9f5ae0304",
                    "ClientObjectGUID": "a04bf661-3adc-11eb-b990-04d9f5ae0304",
                    "NumberSub": "РР-00000001",
                    "Date": "2023-03-07T21:03:41+03:00",
                    "StartDate": "2023-03-06T00:00:00+03:00",
                    "GUIDRequest": "2ec2dff2-bd12-11ed-81b6-00155df43005",
                    "Products": [
                        {
                            "ItemGUID": "24c99a24-7729-11ea-b97f-04d9f5ae0304",
                            "Serial": "000007",
                            "Article": "D25153K-KS",
                            "Quantity": 1
                        }
                    ]
                }
            ]
        }
    },
    "error": null,
    "errorCode": null
}
```

---

## ProParckMoving

### Описание

Предназначен для перемещения инструментов по объектам в подписке ProPark

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/moving
```

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание                  |
| ------------- | :---------: | :----------: | :------------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)       |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)       |
| GUIDCustomer  | Строка (36) |      Да      | GUID клиента              |
| Request       |   Объект    |      Да      | Информация по перемещению |

**Request:**

| Параметры            |             Тип             | Обязательный | Описание                                            |
| -------------------- | :-------------------------: | :----------: | :-------------------------------------------------- |
| Date                 | Дата (строка в формате UTC) |      Да      | Дата перемещения                                    |
| Number               |           Строка            |      Да      | Номер перемещения  на сайте                         |
| ClientObjectGUIDFrom |         Строка (36)         |      Да      | Идентификатор объекта клиента (откуда перемещается) |
| ClientObjectGUIDTo   |         Строка (36)         |      Да      | Идентификатор объекта клиента (куда перемещается)   |
| Comment              |           Строка            |      Да      | Комментарий                                         |
| Products             |           Массив            |      Да      | Данные по инструменту                               |

**Products:**

| Параметры |     Тип     | Обязательный | Описание                   |
| --------- | :---------: | :----------: | :------------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор инструмента  |
| Serial    |   Строка    |      Да      | Серийный номер инструмента |
| Article   |   Строка    |      Да      | Артикул                    |
| NumberSub | Строка (36) |      Да      | Номер подписки 1С ProParck |
| Quantity  |   Строка    |      Да      | Количество                 |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание                              |
| ------------- | :---------: | :----------: | :------------------------------------ |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)                   |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)                   |
| Notice        |   Строка    |      Да      | Информация по результатам перемещения |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/proParck/moving
```

**Тело запроса в формате _JSON_**:

```json
{    
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
    "GUIDCustomer": "8aa517ea-cc24-11ea-b98b-04d9f5ae0304",
    "Request": {
        "Date": "2023-03-08T11:04:24+03:00",
        "Number": "N3322",
        "ClientObjectGUIDFrom": "a04bf661-3adc-11eb-b990-04d9f5ae0304",
        "ClientObjectGUIDTo": "b8fc64af-3adc-11eb-b990-04d9f5ae0304",
        "Comment": "Ком#",
        "Products": [
            {
                "GUID": "24c99a24-7729-11ea-b97f-04d9f5ae0304",
                "Serial": "000007",
                "NumberSub": "РР-00000001",
                "Article": "D25153K-KS",
                "Quantity": "1"
            }
        ]
    }
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
        "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c"
        "Notice": "Выполнено успешно"
    },
    "error": null
}
```

---

## ProParckRequest

### Описание

Предназначен для создания заявок по подписке ProPark в 1С

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/request
```

Тело запроса содержит _JSON_ с следующими параметрами:

| Параметры     |     Тип     | Обязательный | Описание                           |
| ------------- | :---------: | :----------: | :--------------------------------- |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)                |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)                |
| GUIDCustomer  | Строка (36) |      Да      | GUID клиента для оформления заказа |
| Request       |   Объект    |      Да      | Информация по заявке               |

**Request:**

| Параметры        |             Тип             | Обязательный | Описание                                                                                                      |
| ---------------- | :-------------------------: | :----------: | :------------------------------------------------------------------------------------------------------------ |
| Type             |           Строка            |      Да      | Тип документа, варианты: New (новая подписка), return (возврат из подписки), swap (замена инструмента)        |
| Date             | Дата (строка в формате UTC) |      Да      | Дата заявки                                                                                                   |
| DatePP           | Дата (строка в формате UTC) |      Да      | Дата начала/окончаний действия подписки. С какого числа нужен инструмент или когда планируют вернуть/заменить |
| Number           |           Строка            |      Да      | Номер заявки в ProParсk                                                                                       |
| ClientObjectGUID |         Строка (36)         |      Да      | Идентификатор объекта клиента                                                                                 |
| Comment          |           Строка            |      Да      | Комментарий                                                                                                   |
| Products         |           Массив            |      Да      | Данные по инструменту                                                                                         |

**Products:**

| Параметры |     Тип     | Обязательный | Описание                                                    |
| --------- | :---------: | :----------: | :---------------------------------------------------------- |
| GUID      | Строка (36) |      Да      | Идентификатор инструмента                                   |
| Serial    |   Строка    |     Нет      | Серийный номер инструмента (только для типов return и swap) |
| NumberSub | Строка (36) |     Нет      | Номер подписки 1С ProParck (только для типов return и swap) |
| Article   |   Строка    |      Да      | Артикул                                                     |
| Quantity  |   Строка    |      Да      | Количество                                                  |
| Price     |   Строка    |     Нет      | Цена (только для типа New)                                  |
| Sum       |   Строка    |     Нет      | Сумма в строке (только для типа New)                        |

Тело ответа содержит _JSON_ с следующими параметрами:

| Параметры |           Тип            | Обязательный | Описание                       |
| --------- | :----------------------: | :----------: | :----------------------------- |
| response  | Null, либо данные ответа |      Да      | Не заполняется при ошибке      |
| error     |          Строка          |      Да      | Строка описания ошибки         |
| errorCode |          Строка          |      Да      | Код ошибки в классификации API |

**response:**

| Параметры     |     Тип     | Обязательный | Описание                           |
| ------------- | :---------: | :----------: | :--------------------------------- |
| TransactionID | Строка (36) |     Нет      | [См. общее](#общее)                |
| SourceID      | Строка (36) |      Да      | [См. общее](#общее)                |
| Number1C      |   Строка    |      Да      | Номер заявки в 1С (номер подписки) |

### Пример

**_URL_**:

```html
https://<server>/PersAcc/proParck/request
```

**Тело запроса в формате _JSON_**:

```json
{    
    "TransactionID": "C8110986-AB34-41A4-8592-03D90132FE82",
    "SourceID": "90802caa-5c8d-4e9a-8147-b8f0a806093c",
    "GUIDCustomer": "cbd1d77f-3933-11eb-b990-04d9f5ae0304",
    "Request": {
        "Type": "new",
        "Date": "2023-01-14T11:04:24+03:00",
        "DatePP": "2023-01-16T11:04:24+03:00",
        "Number": "1",
        "ClientObjectGUID": "3a2db226-041a-11ed-81a0-00155df43005",
        "Comment": "Комментарий",
        "Products": [
            {
                "GUID": "b388af94-db3d-11ec-81a0-00155df43005",
                "Article": "5009D-SP",
                "Quantity": "1"
                "Price": "17500",
                "Sum": "17500"
            }
        ]
    }
}
```

**Ответ в формате _JSON_**:

```json
{
    "response": {
        "Number1C": "000000004"
    },
    "error": null
}
```

---

## Documents

---

## DataBySales_All

### Описание

Предназначен для получения всех расходных накладных из 1С

Метод - **POST**

### Описание шаблона

**_URL_**:

```html
https://<server>/PersAcc/proParck/request
```
